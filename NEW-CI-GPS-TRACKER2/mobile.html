<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DT Driver - GPS Logger</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="style-mobile.css" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center p-3">
        <div class="login-container p-4 w-100" style="max-width: 400px;" id="loginScreen">
            <div class="text-center mb-4">
                <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" 
                     style="width: 80px; height: 80px; font-size: 2rem;">
                    üöö
                </div>
                <h3 class="mt-3 text-dark">DT GPS Logger</h3>
                <p class="text-muted">Login Driver Dump Truck</p>
            </div>
            
            <form id="loginForm">
                <div class="mb-3">
                    <label class="form-label">Nama Driver</label>
                    <input type="text" class="form-control" id="driverName" placeholder="Masukkan nama lengkap" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Nomor Unit DT</label>
                    <select class="form-select" id="unitNumber" required>
                        <option value="">Pilih Unit DT</option>
                        <option value="DT-06">DT-06 - Dump Truck 2018</option>
                        <option value="DT-07">DT-07 - Dump Truck 2018</option>
                        <option value="DT-12">DT-12 - Dump Truck 2020</option>
                        <option value="DT-13">DT-13 - Dump Truck 2020</option>
                        <option value="DT-15">DT-15 - Dump Truck 2020</option>
                        <option value="DT-16">DT-16 - Dump Truck 2020</option>
                        <option value="DT-17">DT-17 - Dump Truck 2020</option>
                        <option value="DT-18">DT-18 - Dump Truck 2020</option>
                        <option value="DT-23">DT-23 - Dump Truck 2021</option>
                        <option value="DT-24">DT-24 - Dump Truck 2021</option>
                        <option value="DT-25">DT-25 - Dump Truck 2022</option>
                        <option value="DT-26">DT-26 - Dump Truck 2022</option>
                        <option value="DT-27">DT-27 - Dump Truck 2022</option>
                        <option value="DT-28">DT-28 - Dump Truck 2022</option>
                        <option value="DT-29">DT-29 - Dump Truck 2022</option>
                        <option value="DT-32">DT-32 - Dump Truck 2024</option>
                        <option value="DT-33">DT-33 - Dump Truck 2025</option>
                        <option value="DT-34">DT-34 - Dump Truck 2025</option>
                        <option value="DT-35">DT-35 - Dump Truck 2025</option>
                        <option value="DT-36">DT-36 - Dump Truck 2020</option>
                        <option value="DT-37">DT-37 - Dump Truck 2020</option>
                        <option value="DT-38">DT-38 - Dump Truck 2020</option>
                        <option value="DT-39">DT-39 - Dump Truck 2020</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary w-100 py-2 fw-bold">
                    üöÄ Login & Start GPS
                </button>
            </form>
        </div>
    </div>

    <!-- Driver App Screen -->
    <div class="driver-app" id="driverApp">
        <!-- Header -->
        <div class="row align-items-center m-3">
            <div class="col-8">
                <h5 class="mb-0">üöö DT Driver</h5>
                <small class="text-muted" id="currentTime">--:--:--</small>
            </div>
            <div class="col-4 text-end">
                <span class="connection-status" id="connectionDot"></span>
                <span id="connectionStatus">MENYAMBUNG...</span>
            </div>
        </div>

        <!-- Vehicle Info -->
        <div class="vehicle-info p-3 m-3">
            <div class="row align-items-center">
                <div class="col-8">
                    <h4 class="mb-1 fw-bold" id="vehicleName">-</h4>
                    <small>Driver: <span id="driverDisplayName">-</span></small>
                </div>
                <div class="col-4 text-end">
                    <div class="bg-white text-dark rounded px-2 py-1">
                        <small class="fw-bold" id="vehicleStatus">READY</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Stats -->
        <div class="row m-2">
            <div class="col-6">
                <div class="stats-card text-center">
                    <small class="d-block">KECEPATAN</small>
                    <div class="speed-gauge" id="currentSpeed">0</div>
                    <small>km/h</small>
                </div>
            </div>
            <div class="col-6">
                <div class="stats-card text-center">
                    <small class="d-block">JARAK HARI INI</small>
                    <div class="distance-counter" id="todayDistance">0.0</div>
                    <small>kilometer</small>
                </div>
            </div>
        </div>

        <!-- GPS Data -->
        <div class="card m-3">
            <div class="card-body">
                <h6 class="card-title">üìç DATA GPS REAL-TIME</h6>
                <div class="gps-data p-3">
                    <div class="row">
                        <div class="col-6 mb-2">
                            <small class="text-muted d-block">LATITUDE</small>
                            <strong id="currentLat">-</strong>
                        </div>
                        <div class="col-6 mb-2">
                            <small class="text-muted d-block">LONGITUDE</small>
                            <strong id="currentLng">-</strong>
                        </div>
                        <div class="col-6">
                            <small class="text-muted d-block">AKURASI</small>
                            <strong id="gpsAccuracy">-</strong>
                        </div>
                        <div class="col-6">
                            <small class="text-muted d-block">ARAH</small>
                            <strong id="gpsBearing">-</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Buttons -->
        <div class="row m-2">
            <div class="col-6">
                <button class="btn btn-success w-100 control-btn" onclick="startJourney()">
                    üöÄ MULAI
                </button>
            </div>
            <div class="col-6">
                <button class="btn btn-warning w-100 control-btn" onclick="pauseJourney()">
                    ‚è∏Ô∏è JEDA
                </button>
            </div>
            <div class="col-6">
                <button class="btn btn-info w-100 control-btn" onclick="reportIssue()">
                    üö® LAPOR
                </button>
            </div>
            <div class="col-6">
                <button class="btn btn-danger w-100 control-btn" onclick="endJourney()">
                    ‚úÖ SELESAI
                </button>
            </div>
        </div>

        <!-- Session Info -->
        <div class="card m-3">
            <div class="card-body">
                <h6 class="card-title">üìä INFO SESI</h6>
                <div class="row text-center">
                    <div class="col-4">
                        <small class="text-muted d-block">DURASI</small>
                        <strong id="sessionDuration">00:00:00</strong>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">DATA POINTS</small>
                        <strong id="dataPoints">0</strong>
                    </div>
                    <div class="col-4">
                        <small class="text-muted d-block">RATA-RATA</small>
                        <strong id="avgSpeed">0</strong>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Log -->
        <div class="card m-3">
            <div class="card-body">
                <h6 class="card-title">üìù LOG TRANSMISI DATA</h6>
                <div class="data-log" id="dataLogs">
                    <div class="alert alert-info py-2 mb-2">
                        <small>System: Menunggu inisialisasi GPS...</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Logout Button -->
        <button class="btn btn-danger btn-logout" onclick="logout()">
            üîì Logout
        </button>
    </div>

    <script src="script-mobile.js"></script>
</body>
</html>
